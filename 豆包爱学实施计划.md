
# ğŸ“ è±†åŒ…çˆ±å­¦Appä¸šåŠ¡ViewModelå®æ–½è®¡åˆ’æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºç°æœ‰æ’ä»¶åŒ–æ¶æ„ï¼Œä¸ºè±†åŒ…çˆ±å­¦Appåˆ›å»ºä¸‰ä¸ªæ ¸å¿ƒä¸šåŠ¡åœºæ™¯çš„ViewModelï¼Œå®ç°å®Œæ•´çš„ä¸šåŠ¡åŠŸèƒ½å±•ç¤ºã€‚æ¯ä¸ªåœºæ™¯éƒ½åŒ…å«ä¸åŒçš„å­¦ç”Ÿç±»å‹å’Œå­¦ä¹ è·¯å¾„ï¼Œé€šè¿‡Mockæ•°æ®éªŒè¯æ¶æ„çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚

**æ–°å¢æ ¸å¿ƒç‰¹æ€§ï¼š**
- **åŠ¨æ€å­¦ä¹ è·¯å¾„**ï¼šæ ¹æ®ç”¨æˆ·åé¦ˆå®æ—¶è°ƒæ•´å­¦ä¹ æ­¥éª¤
- **æ™ºèƒ½è·¯å¾„ä¼˜åŒ–**ï¼šåŸºäºå­¦ä¹ æ•ˆæœè‡ªåŠ¨å¢å‡å­¦ä¹ ç¯èŠ‚
- **å¯è§†åŒ–è·¯å¾„å˜åŒ–**ï¼šåœ¨UIä¸­å±•ç¤ºå­¦ä¹ è·¯å¾„çš„å®æ—¶å˜åŒ–è¿‡ç¨‹
- **åé¦ˆé©±åŠ¨è°ƒæ•´**ï¼šç”¨æˆ·è¡Œä¸ºå’Œå­¦ä¹ æ•ˆæœåé¦ˆé©±åŠ¨è·¯å¾„ä¼˜åŒ–

**æ–°å¢æ ¸å¿ƒç‰¹æ€§ï¼š**
- **åŠ¨æ€å­¦ä¹ è·¯å¾„**ï¼šæ ¹æ®ç”¨æˆ·åé¦ˆå®æ—¶è°ƒæ•´å­¦ä¹ æ­¥éª¤
- **æ™ºèƒ½è·¯å¾„ä¼˜åŒ–**ï¼šåŸºäºå­¦ä¹ æ•ˆæœè‡ªåŠ¨å¢å‡å­¦ä¹ ç¯èŠ‚
- **å¯è§†åŒ–è·¯å¾„å˜åŒ–**ï¼šåœ¨UIä¸­å±•ç¤ºå­¦ä¹ è·¯å¾„çš„å®æ—¶å˜åŒ–è¿‡ç¨‹
- **åé¦ˆé©±åŠ¨è°ƒæ•´**ï¼šç”¨æˆ·è¡Œä¸ºå’Œå­¦ä¹ æ•ˆæœåé¦ˆé©±åŠ¨è·¯å¾„ä¼˜åŒ–

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç°æœ‰æ¶æ„åŸºç¡€
```
MVVMæ¶æ„ + æ’ä»¶åŒ–èƒ½åŠ›
â”œâ”€â”€ ViewModel (ä¸šåŠ¡é€»è¾‘å±‚)
â”œâ”€â”€ AICapabilityManager (èƒ½åŠ›ç®¡ç†å±‚)
â”œâ”€â”€ AICapabilityPlugin (æ’ä»¶æ¥å£å±‚)
â””â”€â”€ Mockæ•°æ®å±‚ (ä¸šåŠ¡æ•°æ®æ¨¡æ‹Ÿ)
```

### æ–°å¢ä¸šåŠ¡æ¶æ„
```
è±†åŒ…çˆ±å­¦ä¸šåŠ¡å±‚
â”œâ”€â”€ DouBaoMathViewModel (æ•°å­¦å­¦ä¹ åœºæ™¯)
â”œâ”€â”€ DouBaoLearningPathViewModel (å­¦ä¹ è·¯å¾„åœºæ™¯)
â”œâ”€â”€ DouBaoTutoringViewModel (AIè¾…å¯¼åœºæ™¯)
â”œâ”€â”€ DouBaoStudentProfile (å­¦ç”Ÿç”»åƒæ¨¡å‹)
â”œâ”€â”€ DouBaoLearningRecord (å­¦ä¹ è®°å½•æ¨¡å‹)
â”œâ”€â”€ DouBaoMockDataProvider (Mockæ•°æ®æä¾›è€…)
â”œâ”€â”€ DouBaoPathOptimizer (è·¯å¾„ä¼˜åŒ–å¼•æ“) âœ¨
â”œâ”€â”€ DouBaoFeedbackAnalyzer (åé¦ˆåˆ†æå™¨) âœ¨
â””â”€â”€ DouBaoPathVisualizer (è·¯å¾„å¯è§†åŒ–å™¨) âœ¨
```

## ğŸ¯ ä¸‰ä¸ªæ ¸å¿ƒåœºæ™¯è®¾è®¡

### åœºæ™¯1ï¼šæ™ºèƒ½æ•°å­¦å­¦ä¹ é—­ç¯

#### å­¦ç”Ÿç±»å‹å®šä¹‰
```swift
enum StudentType {
    case beginner      // åˆå­¦è€…ï¼šéœ€è¦åŸºç¡€æ¦‚å¿µè®²è§£
    case intermediate  // ä¸­ç­‰ç”Ÿï¼šéœ€è¦è§£é¢˜æŠ€å·§æŒ‡å¯¼
    case advanced      // ä¼˜ç§€ç”Ÿï¼šéœ€è¦æ‹“å±•æ€ç»´è®­ç»ƒ
    case struggling    // å›°éš¾ç”Ÿï¼šéœ€è¦é”™é¢˜ä¸“é¡¹è®­ç»ƒ
    case adaptive      // è‡ªé€‚åº”å‹ï¼šæ ¹æ®è¡¨ç°åŠ¨æ€è°ƒæ•´ âœ¨
}
```

#### åŠ¨æ€å­¦ä¹ è·¯å¾„è®¾è®¡ âœ¨
```
åŸºç¡€è·¯å¾„ â†’ åé¦ˆæ”¶é›† â†’ è·¯å¾„è°ƒæ•´ â†’ ä¼˜åŒ–æ•ˆæœ

åˆå§‹è·¯å¾„ï¼ˆä»¥ä¸­ç­‰ç”Ÿä¸ºä¾‹ï¼‰ï¼š
æ‹ç…§è¯†åˆ« â†’ è§£é¢˜åˆ†æ â†’ æŠ€å·§æ€»ç»“ â†’ åŸºç¡€ç»ƒä¹  â†’ æ•ˆæœè¯„ä¼°

åé¦ˆé©±åŠ¨è°ƒæ•´ï¼š
â”œâ”€â”€ ç†è§£å›°éš¾ â†’ å¢åŠ æ¦‚å¿µè®²è§£ â†’ ç®€åŒ–ç»ƒä¹  â†’ é‡å¤è®­ç»ƒ
â”œâ”€â”€ æŒæ¡è‰¯å¥½ â†’ å‡å°‘åŸºç¡€ç»ƒä¹  â†’ å¢åŠ æ‹“å±•é¢˜ â†’ æ€ç»´è®­ç»ƒ
â”œâ”€â”€ å…´è¶£ä¸è¶³ â†’ å¢åŠ æ¸¸æˆåŒ– â†’ è¶£å‘³ç»ƒä¹  â†’ æ¿€åŠ±æœºåˆ¶
â””â”€â”€ è¿›åº¦ç¼“æ…¢ â†’ åˆ†è§£æ­¥éª¤ â†’ ä¸“é¡¹è®­ç»ƒ â†’ ä¸ªæ€§åŒ–è¾…å¯¼

åŠ¨æ€è·¯å¾„ç¤ºä¾‹ï¼š
æ‹ç…§è¯†åˆ« â†’ è§£é¢˜åˆ†æ â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ æŠ€å·§æ€»ç»“ â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ æ•ˆæœè¯„ä¼°
```

#### è·¯å¾„è°ƒæ•´ç­–ç•¥ âœ¨
```swift
enum PathAdjustmentStrategy {
    case addConceptExplanation    // å¢åŠ æ¦‚å¿µè®²è§£
    case addPracticeDrill         // å¢åŠ ç»ƒä¹ ç¯èŠ‚
    case addVisualAid            // å¢åŠ å¯è§†åŒ–è¾…åŠ©
    case addAudioExplanation     // å¢åŠ éŸ³é¢‘è®²è§£
    case addInteractiveDemo      // å¢åŠ äº¤äº’æ¼”ç¤º
    case addPeerLearning         // å¢åŠ åŒä¼´å­¦ä¹ 
    case addGamification         // å¢åŠ æ¸¸æˆåŒ–å…ƒç´ 
    case addRealWorldExample     // å¢åŠ å®é™…åº”ç”¨
    case addReviewSession        // å¢åŠ å¤ä¹ ç¯èŠ‚
    case addExtensionActivity    // å¢åŠ æ‹“å±•æ´»åŠ¨
    case removeRedundantStep     // ç§»é™¤å†—ä½™æ­¥éª¤
    case simplifyComplexStep     // ç®€åŒ–å¤æ‚æ­¥éª¤
    case accelerateProgress      // åŠ é€Ÿè¿›åº¦
    case slowDownForMastery      // æ”¾æ…¢èŠ‚å¥
}

struct PathAdjustment {
    let strategy: PathAdjustmentStrategy
    let reason: String
    let confidence: Double
    let expectedImpact: String
    let insertionPoint: Int?
    let removalPoint: Int?
}
```

#### ViewModelæ ¸å¿ƒå®ç°
```swift
@MainActor
final class DouBaoMathViewModel: ObservableObject {
    // MARK: - Published Properties
    @Published var currentStudent: DouBaoStudentProfile?
    @Published var currentProblem: MathProblem?
    @Published var learningPath: [LearningStep] = []
    @Published var pathHistory: [PathSnapshot] = [] // âœ¨ è·¯å¾„å†å²
    @Published var currentAdjustments: [PathAdjustment] = [] // âœ¨ å½“å‰è°ƒæ•´
    @Published var analysisResult: ProblemAnalysis?
    @Published var recommendedExercises: [MathExercise] = []
    @Published var learningProgress: LearningProgress?
    @Published var userFeedback: [UserFeedback] = [] // âœ¨ ç”¨æˆ·åé¦ˆ
    @Published var isLoading: Bool = false
    @Published var errorMessage: String?
    
    // MARK: - Core Methods
    func analyzeStudentType() async throws
    func processMathProblem(_ imageData: Data) async throws
    func generateLearningPath() async throws
    func executeLearningStep(_ step: LearningStep) async throws
    func updateLearningProgress() async throws
    func generateReport() async throws
    
    // MARK: - åŠ¨æ€è·¯å¾„è°ƒæ•´æ–¹æ³• âœ¨
    func collectUserFeedback(_ feedback: UserFeedback) async throws
    func analyzeFeedbackAndAdjustPath() async throws
    func applyPathAdjustment(_ adjustment: PathAdjustment) async throws
    func snapshotCurrentPath() async throws
    func revertToPreviousPath() async throws
    func predictOptimalPath() async throws
}
```

### åœºæ™¯2ï¼šä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„è§„åˆ’

#### å­¦ä¹ é£æ ¼å®šä¹‰
```swift
enum LearningStyle {
    case visual      // è§†è§‰å‹ï¼šå–œæ¬¢å›¾è¡¨ã€è§†é¢‘
    case auditory    // å¬è§‰å‹ï¼šå–œæ¬¢éŸ³é¢‘ã€è®²è§£
    case kinesthetic // åŠ¨è§‰å‹ï¼šå–œæ¬¢åŠ¨æ‰‹ã€å®éªŒ
    case reading     // é˜…è¯»å‹ï¼šå–œæ¬¢æ–‡å­—ã€é˜…è¯»
    case mixed       // æ··åˆå‹ï¼šå¤šç§é£æ ¼ç»“åˆ âœ¨
    case adaptive    // è‡ªé€‚åº”å‹ï¼šæ ¹æ®å†…å®¹åŠ¨æ€è°ƒæ•´ âœ¨
}
```

#### åŠ¨æ€è·¯å¾„è§„åˆ’ç­–ç•¥ âœ¨
```
å­¦ä¹ é£æ ¼ + çŸ¥è¯†æ°´å¹³ + å­¦ä¹ ç›®æ ‡ + å®æ—¶åé¦ˆ â†’ åŠ¨æ€ä¸ªæ€§åŒ–è·¯å¾„

åŸºç¡€è·¯å¾„ç”Ÿæˆï¼š
è§†è§‰å‹å­¦ç”Ÿï¼šçŸ¥è¯†ç‚¹å›¾è°± â†’ è§†é¢‘è®²è§£ â†’ å›¾è¡¨ç»ƒä¹  â†’ å¯è§†åŒ–å¤ä¹ 

åé¦ˆé©±åŠ¨è°ƒæ•´ï¼š
â”œâ”€â”€ è§†é¢‘ç†è§£å›°éš¾ â†’ å¢åŠ æ–‡å­—è¯´æ˜ â†’ æ·»åŠ éŸ³é¢‘è®²è§£ â†’ äº¤äº’å¼æ¼”ç¤º
â”œâ”€â”€ å›¾è¡¨ç»ƒä¹ æ•ˆæœå·® â†’ å¢åŠ åŠ¨æ‰‹æ“ä½œ â†’ æ¸¸æˆåŒ–ç»ƒä¹  â†’ åŒä¼´è®¨è®º
â”œâ”€â”€ å¤ä¹ æ•ˆæœè‰¯å¥½ â†’ å‡å°‘é‡å¤å†…å®¹ â†’ å¢åŠ æ‹“å±•çŸ¥è¯† â†’ åº”ç”¨å®è·µ
â””â”€â”€ å­¦ä¹ å…´è¶£ä¸‹é™ â†’ å¢åŠ è¶£å‘³å…ƒç´  â†’ æ”¹å˜å‘ˆç°æ–¹å¼ â†’ æ¿€åŠ±æœºåˆ¶

åŠ¨æ€è·¯å¾„ç¤ºä¾‹ï¼š
çŸ¥è¯†ç‚¹å›¾è°± â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ è§†é¢‘è®²è§£ â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ å›¾è¡¨ç»ƒä¹  â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ å¯è§†åŒ–å¤ä¹ 
```

#### è·¯å¾„ä¼˜åŒ–ç®—æ³• âœ¨
```swift
struct PathOptimizationRule {
    let condition: FeedbackCondition
    let action: PathAdjustmentAction
    let priority: Int
    let cooldown: TimeInterval
}

enum FeedbackCondition {
    case comprehensionBelow(threshold: Double)
    case engagementBelow(threshold: Double)
    case progressAbove(threshold: Double)
    case timeSpentAbove(threshold: TimeInterval)
    case errorRateAbove(threshold: Double)
    case satisfactionBelow(threshold: Double)
    case learningStyleMismatch
    case difficultyMismatch
}

enum PathAdjustmentAction {
    case insertStep(LearningStep, at: Int)
    case removeStep(at: Int)
    case replaceStep(at: Int, with: LearningStep)
    case reorderSteps([Int])
    case changeDifficulty(by: Double)
    case changeStyle(to: LearningStyle)
    case addSupportingContent(String)
    case addPracticeSession(Int)
}
```

#### ViewModelæ ¸å¿ƒå®ç°
```swift
@MainActor
final class DouBaoLearningPathViewModel: ObservableObject {
    // MARK: - Published Properties
    @Published var studentProfile: DouBaoStudentProfile?
    @Published var learningPath: PersonalizedLearningPath?
    @Published var pathEvolution: [PathEvolution] = [] // âœ¨ è·¯å¾„æ¼”è¿›å†å²
    @Published var currentModule: LearningModule?
    @Published var progress: ModuleProgress?
    @Published var recommendations: [ContentRecommendation] = []
    @Published var assessmentResults: [AssessmentResult] = []
    @Published var feedbackMetrics: [FeedbackMetric] = [] // âœ¨ åé¦ˆæŒ‡æ ‡
    @Published var optimizationSuggestions: [OptimizationSuggestion] = [] // âœ¨ ä¼˜åŒ–å»ºè®®
    @Published var isPathGenerating: Bool = false
    @Published var isOptimizing: Bool = false // âœ¨ ä¼˜åŒ–çŠ¶æ€
    
    // MARK: - Core Methods
    func analyzeLearningStyle() async throws
    func generatePersonalizedPath() async throws
    func startLearningModule(_ module: LearningModule) async throws
    func updateModuleProgress() async throws
    func getContentRecommendations() async throws
    func assessLearningEffect() async throws
    func adjustLearningPath() async throws
    
    // MARK: - åŠ¨æ€è·¯å¾„ä¼˜åŒ–æ–¹æ³• âœ¨
    func collectFeedbackMetrics() async throws
    func analyzePathEffectiveness() async throws
    func generateOptimizationSuggestions() async throws
    func applyOptimization(_ suggestion: OptimizationSuggestion) async throws
    func trackPathEvolution() async throws
    func predictOptimalPath() async throws
    func revertToBetterPath() async throws
}
```

### åœºæ™¯3ï¼šAIä¸€å¯¹ä¸€è¾…å¯¼

#### è¾…å¯¼æ¨¡å¼å®šä¹‰
```swift
enum TutoringMode {
    case questionAnswer    // é—®ç­”æ¨¡å¼ï¼šå­¦ç”Ÿæé—®ï¼ŒAIå›ç­”
    case guidedLearning    // å¼•å¯¼æ¨¡å¼ï¼šAIå¼•å¯¼å­¦ä¹ è¿‡ç¨‹
    case practiceDrill     // ç»ƒä¹ æ¨¡å¼ï¼šAIå‡ºé¢˜ï¼Œå­¦ç”Ÿç»ƒä¹ 
    case reviewSession     // å¤ä¹ æ¨¡å¼ï¼šAIå¸®åŠ©å¤ä¹ çŸ¥è¯†ç‚¹
    case examPreparation   // å¤‡è€ƒæ¨¡å¼ï¼šAIæ¨¡æ‹Ÿè€ƒè¯•è®­ç»ƒ
    case adaptiveTutoring  // è‡ªé€‚åº”è¾…å¯¼ï¼šæ ¹æ®è¡¨ç°åŠ¨æ€è°ƒæ•´ âœ¨
    case collaborative     // åä½œæ¨¡å¼ï¼šAIä¸å­¦ç”Ÿå…±åŒæ¢ç´¢ âœ¨
}
```

#### åŠ¨æ€äº¤äº’æµç¨‹è®¾è®¡ âœ¨
```
è¾…å¯¼æ¨¡å¼ â†’ å®æ—¶åé¦ˆåˆ†æ â†’ åŠ¨æ€è°ƒæ•´ç­–ç•¥ â†’ ä¼˜åŒ–å­¦ä¹ æ•ˆæœ

åŸºç¡€äº¤äº’æµç¨‹ï¼š
é—®ç­”æ¨¡å¼ï¼šé—®é¢˜ç†è§£ â†’ çŸ¥è¯†æ£€ç´¢ â†’ ç­”æ¡ˆç”Ÿæˆ â†’ è§£é‡Šè¯´æ˜

åé¦ˆé©±åŠ¨è°ƒæ•´ï¼š
â”œâ”€â”€ ç†è§£ä¸å……åˆ† â†’ å¢åŠ ä¸¾ä¾‹è¯´æ˜ â†’ ç®€åŒ–è¯­è¨€ â†’ åˆ†æ­¥è§£é‡Š
â”œâ”€â”€ å…´è¶£ä¸æµ“ â†’ å¢åŠ è¶£å‘³å…ƒç´  â†’ æ”¹å˜è¡¨è¾¾æ–¹å¼ â†’ äº’åŠ¨æ¸¸æˆ
â”œâ”€â”€ è¿›åº¦è¿‡å¿« â†’ æ”¾æ…¢èŠ‚å¥ â†’ å¢åŠ ç»ƒä¹  â†’ å·©å›ºå¤ä¹ 
â””â”€â”€ éš¾åº¦è¿‡é«˜ â†’ é™ä½éš¾åº¦ â†’ åŸºç¡€è®²è§£ â†’ é€æ­¥æå‡

åŠ¨æ€äº¤äº’ç¤ºä¾‹ï¼š
é—®é¢˜ç†è§£ â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ çŸ¥è¯†æ£€ç´¢ â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ ç­”æ¡ˆç”Ÿæˆ â†’ [æ ¹æ®åé¦ˆåŠ¨æ€æ’å…¥] â†’ è§£é‡Šè¯´æ˜
```

#### äº¤äº’ä¼˜åŒ–ç­–ç•¥ âœ¨
```swift
struct InteractionOptimization {
    let trigger: InteractionTrigger
    let adjustment: InteractionAdjustment
    let expectedOutcome: String
    let confidence: Double
}

enum InteractionTrigger {
    case comprehensionGap(level: Double)
    case engagementDrop(level: Double)
    case frustrationDetected
    case confusionIndicated
    case interestIncrease
    case masteryAchieved
    case timePressure
    case learningStyleMismatch
}

enum InteractionAdjustment {
    case changeTone(to: CommunicationTone)
    case adjustPace(by: Double)
    case addVisualAid(String)
    case addAudioExplanation
    case simplifyLanguage
    case addExamples(Int)
    case changeApproach(to: TeachingApproach)
    case addEncouragement
    case provideHints(Int)
    case createBreak
}
```

#### ViewModelæ ¸å¿ƒå®ç°
```swift
@MainActor
final class DouBaoTutoringViewModel: ObservableObject {
    // MARK: - Published Properties
    @Published var currentSession: TutoringSession?
    @Published var conversationHistory: [TutoringMessage] = []
    @Published var interactionHistory: [InteractionRecord] = [] // âœ¨ äº¤äº’å†å²
    @Published var currentMode: TutoringMode = .questionAnswer
    @Published var sessionProgress: SessionProgress?
    @Published var aiResponse: AIResponse?
    @Published var learningInsights: [LearningInsight] = []
    @Published var interactionOptimizations: [InteractionOptimization] = [] // âœ¨ äº¤äº’ä¼˜åŒ–
    @Published var realTimeFeedback: RealTimeFeedback? // âœ¨ å®æ—¶åé¦ˆ
    @Published var isProcessing: Bool = false
    @Published var isOptimizing: Bool = false // âœ¨ ä¼˜åŒ–çŠ¶æ€
    
    // MARK: - Core Methods
    func startTutoringSession(mode: TutoringMode) async throws
    func sendMessage(_ message: String) async throws
    func switchTutoringMode(_ mode: TutoringMode) async throws
    func generatePracticeQuestions() async throws
    func analyzeStudentResponse(_ response: String) async throws
    func generateLearningInsights() async throws
    func endTutoringSession() async throws
    
    // MARK: - åŠ¨æ€äº¤äº’ä¼˜åŒ–æ–¹æ³• âœ¨
    func analyzeRealTimeFeedback() async throws
    func generateInteractionOptimization() async throws
    func applyInteractionAdjustment(_ adjustment: InteractionAdjustment) async throws
    func trackInteractionEffectiveness() async throws
    func predictOptimalInteraction() async throws
    func adaptToStudentMood() async throws
    func optimizeResponseStyle() async throws
}
```

## ğŸ“Š åŠ¨æ€è·¯å¾„æ ¸å¿ƒç»„ä»¶è®¾è®¡ âœ¨

### è·¯å¾„ä¼˜åŒ–å¼•æ“
```swift
protocol DouBaoPathOptimizer {
    func analyzeCurrentPath(_ path: [LearningStep]) async throws -> PathAnalysis
    func generateOptimizationSuggestions(_ analysis: PathAnalysis) async throws -> [OptimizationSuggestion]
    func applyOptimization(_ suggestion: OptimizationSuggestion, to path: [LearningStep]) async throws -> [LearningStep]
    func predictPathEffectiveness(_ path: [LearningStep]) async throws -> Double
    func learnFromFeedback(_ feedback: [UserFeedback]) async throws
}

struct PathAnalysis {
    let effectiveness: Double
    let engagement: Double
    let efficiency: Double
    let adaptability: Double
    let bottlenecks: [PathBottleneck]
    let opportunities: [PathOpportunity]
}

struct PathBottleneck {
    let stepIndex: Int
    let issue: String
    let impact: Double
    let suggestedFix: String
}

struct PathOpportunity {
    let stepIndex: Int
    let opportunity: String
    let potentialGain: Double
    let suggestedEnhancement: String
}
```

### åé¦ˆåˆ†æå™¨
```swift
protocol DouBaoFeedbackAnalyzer {
    func analyzeUserFeedback(_ feedback: [UserFeedback]) async throws -> FeedbackAnalysis
    func detectLearningPatterns(_ history: [LearningRecord]) async throws -> [LearningPattern]
    func predictUserNeeds(_ profile: DouBaoStudentProfile, _ history: [LearningRecord]) async throws -> [UserNeed]
    func generateFeedbackInsights(_ analysis: FeedbackAnalysis) async throws -> [FeedbackInsight]
}

struct FeedbackAnalysis {
    let satisfaction: Double
    let comprehension: Double
    let engagement: Double
    let frustration: Double
    let patterns: [FeedbackPattern]
    let trends: [FeedbackTrend]
}

struct FeedbackPattern {
    let pattern: String
    let frequency: Int
    let context: String
    let impact: Double
}

struct FeedbackTrend {
    let metric: String
    let direction: TrendDirection
    let magnitude: Double
    let duration: TimeInterval
}

enum TrendDirection {
    case improving
    case declining
    case stable
    case fluctuating
}
```

### è·¯å¾„å¯è§†åŒ–å™¨
```swift
protocol DouBaoPathVisualizer {
    func generatePathSnapshot(_ path: [LearningStep]) async throws -> PathSnapshot
    func createPathComparison(_ before: PathSnapshot, _ after: PathSnapshot) async throws -> PathComparison
    func generatePathTimeline(_ history: [PathSnapshot]) async throws -> PathTimeline
    func createOptimizationVisualization(_ optimization: OptimizationSuggestion) async throws -> OptimizationVisualization
}

struct PathSnapshot {
    let timestamp: Date
    let steps: [LearningStep]
    let metrics: PathMetrics
    let adjustments: [PathAdjustment]
    let version: Int
}

struct PathMetrics {
    let totalSteps: Int
    let estimatedDuration: TimeInterval
    let difficulty: Double
    let engagement: Double
    let effectiveness: Double
}

struct PathComparison {
    let before: PathSnapshot
    let after: PathSnapshot
    let changes: [PathChange]
    let improvements: [String]
    let tradeoffs: [String]
}

struct PathChange {
    let type: ChangeType
    let description: String
    let impact: String
    let confidence: Double
}

enum ChangeType {
    case stepAdded
    case stepRemoved
    case stepModified
    case stepReordered
    case difficultyChanged
    case styleChanged
}
```

## ğŸ¨ Mockæ•°æ®è®¾è®¡

### å­¦ç”Ÿç”»åƒMockæ•°æ®
```swift
struct DouBaoStudentProfile {
    let studentId: String
    let name: String
    let age: Int
    let grade: String
    let studentType: StudentType
    let learningStyle: LearningStyle
    let subjects: [Subject]
    let strengths: [String]
    let weaknesses: [String]
    let learningGoals: [String]
    let preferences: [String: Any]
    let adaptability: Double // âœ¨ é€‚åº”èƒ½åŠ›
    let feedbackSensitivity: Double // âœ¨ åé¦ˆæ•æ„Ÿåº¦
    let learningPace: Double // âœ¨ å­¦ä¹ èŠ‚å¥
}

// Mockæ•°æ®ç¤ºä¾‹
let mockStudents = [
    DouBaoStudentProfile(
        studentId: "student_001",
        name: "å°æ˜",
        age: 12,
        grade: "å…­å¹´çº§",
        studentType: .adaptive, // âœ¨ æ”¹ä¸ºè‡ªé€‚åº”å‹
        learningStyle: .mixed, // âœ¨ æ”¹ä¸ºæ··åˆå‹
        subjects: [.math, .chinese, .english],
        strengths: ["é€»è¾‘æ€ç»´", "ç©ºé—´æƒ³è±¡"],
        weaknesses: ["è®¡ç®—ç²—å¿ƒ", "åº”ç”¨é¢˜ç†è§£"],
        learningGoals: ["æé«˜æ•°å­¦æˆç»©", "åŸ¹å…»è§£é¢˜æ€ç»´"],
        preferences: ["å–œæ¬¢åŠ¨ç”»", "åå¥½å›¾è¡¨"],
        adaptability: 0.8, // âœ¨ é«˜é€‚åº”èƒ½åŠ›
        feedbackSensitivity: 0.9, // âœ¨ é«˜åé¦ˆæ•æ„Ÿåº¦
        learningPace: 0.7 // âœ¨ ä¸­ç­‰å­¦ä¹ èŠ‚å¥
    ),
    // ... æ›´å¤šå­¦ç”Ÿæ•°æ®
]
```

### å­¦ä¹ è®°å½•Mockæ•°æ®
```swift
struct DouBaoLearningRecord {
    let recordId: String
    let studentId: String
    let sessionType: SessionType
    let subject: Subject
    let topic: String
    let duration: TimeInterval
    let score: Double?
    let difficulty: Int
    let completionRate: Double
    let timestamp: Date
    let metadata: [String: Any]
    let feedback: UserFeedback? // âœ¨ ç”¨æˆ·åé¦ˆ
    let pathAdjustments: [PathAdjustment]? // âœ¨ è·¯å¾„è°ƒæ•´è®°å½•
    let effectiveness: Double? // âœ¨ å­¦ä¹ æ•ˆæœè¯„ä¼°
}

enum SessionType {
    case mathProblem
    case learningPath
    case tutoringSession
    case practiceExercise
    case assessment
    case pathOptimization // âœ¨ è·¯å¾„ä¼˜åŒ–ä¼šè¯
}

struct UserFeedback {
    let feedbackId: String
    let type: FeedbackType
    let content: String
    let rating: Double
    let timestamp: Date
    let context: String
    let emotionalState: EmotionalState?
}

enum FeedbackType {
    case comprehension
    case engagement
    case difficulty
    case satisfaction
    case frustration
    case confusion
    case interest
    case confidence
}

enum EmotionalState {
    case excited
    case confused
    case frustrated
    case bored
    case confident
    case anxious
    case curious
    case satisfied
}
```

### èƒ½åŠ›ç»„åˆMockæ•°æ®
```swift
struct DouBaoCapabilityPipeline {
    let pipelineId: String
    let scenario: String
    let studentType: StudentType
    let capabilities: [AICapabilityType]
    let expectedOutput: String
    let processingTime: TimeInterval
    let successRate: Double
    let adaptability: Double // âœ¨ é€‚åº”èƒ½åŠ›
    let optimizationCapabilities: [OptimizationCapability] // âœ¨ ä¼˜åŒ–èƒ½åŠ›
}

struct OptimizationCapability {
    let capability: String
    let description: String
    let effectiveness: Double
    let conditions: [String]
}

// Mockç®¡é“æ•°æ®
let mockPipelines = [
    DouBaoCapabilityPipeline(
        pipelineId: "pipeline_001",
        scenario: "æ•°å­¦å­¦ä¹ é—­ç¯",
        studentType: .adaptive, // âœ¨ æ”¹ä¸ºè‡ªé€‚åº”å‹
        capabilities: [.ocr, .mathProblemSolving, .dataAnalysis, .contentRecommendation, .feedbackAnalysis], // âœ¨ å¢åŠ åé¦ˆåˆ†æ
        expectedOutput: "åŠ¨æ€è§£é¢˜åˆ†ææŠ¥å‘Š",
        processingTime: 3.5,
        successRate: 0.95,
        adaptability: 0.9, // âœ¨ é«˜é€‚åº”èƒ½åŠ›
        optimizationCapabilities: [
            OptimizationCapability(
                capability: "å®æ—¶è·¯å¾„è°ƒæ•´",
                description: "æ ¹æ®ç”¨æˆ·åé¦ˆå®æ—¶è°ƒæ•´å­¦ä¹ è·¯å¾„",
                effectiveness: 0.85,
                conditions: ["æœ‰ç”¨æˆ·åé¦ˆ", "å­¦ä¹ æ•ˆæœä¸ä½³"]
            ),
            OptimizationCapability(
                capability: "ä¸ªæ€§åŒ–ä¼˜åŒ–",
                description: "åŸºäºå­¦ä¹ é£æ ¼å’Œåå¥½ä¼˜åŒ–å†…å®¹",
                effectiveness: 0.9,
                conditions: ["æœ‰å­¦ä¹ å†å²", "æ˜ç¡®åå¥½"]
            )
        ]
    ),
    // ... æ›´å¤šç®¡é“æ•°æ®
]
```

## ğŸ“… å®æ–½è®¡åˆ’

### é˜¶æ®µ1ï¼šåŸºç¡€æ¶æ„æ­å»º (4å¤©)

#### Day 1: æ•°æ®æ¨¡å‹å®šä¹‰
- [ ] åˆ›å»º `DouBaoStudentProfile` æ¨¡å‹ï¼ˆå¢åŠ åŠ¨æ€å±æ€§ï¼‰
- [ ] åˆ›å»º `DouBaoLearningRecord` æ¨¡å‹ï¼ˆå¢åŠ åé¦ˆå’Œè°ƒæ•´è®°å½•ï¼‰
- [ ] åˆ›å»º `DouBaoCapabilityPipeline` æ¨¡å‹ï¼ˆå¢åŠ ä¼˜åŒ–èƒ½åŠ›ï¼‰
- [ ] åˆ›å»ºåŠ¨æ€è·¯å¾„ç›¸å…³çš„æšä¸¾å’Œç»“æ„ä½“
- [ ] åˆ›å»ºåé¦ˆåˆ†æç›¸å…³çš„æ•°æ®æ¨¡å‹

#### Day 2: åŠ¨æ€è·¯å¾„æ ¸å¿ƒç»„ä»¶
- [ ] å®ç° `DouBaoPathOptimizer` åè®®
- [ ] å®ç° `DouBaoFeedbackAnalyzer` åè®®
- [ ] å®ç° `DouBaoPathVisualizer` åè®®
- [ ] åˆ›å»ºè·¯å¾„ä¼˜åŒ–ç®—æ³•
- [ ] åˆ›å»ºåé¦ˆåˆ†æç®—æ³•

#### Day 3: Mockæ•°æ®æä¾›è€…
- [ ] å®ç° `DouBaoMockDataProvider` åè®®
- [ ] åˆ›å»ºä¸‰ä¸ªåœºæ™¯çš„Mockæ•°æ®ï¼ˆåŒ…å«åŠ¨æ€ç‰¹æ€§ï¼‰
- [ ] å®ç°æ•°æ®ç”Ÿæˆå’Œæ¨¡æ‹Ÿé€»è¾‘
- [ ] æ·»åŠ éšæœºæ€§å’ŒçœŸå®æ€§
- [ ] åˆ›å»ºåé¦ˆæ•°æ®ç”Ÿæˆå™¨

#### Day 4: åŸºç¡€ViewModel
- [ ] åˆ›å»ºä¸‰ä¸ªåœºæ™¯çš„åŸºç¡€ViewModel
- [ ] å®ç°åŸºæœ¬çš„ObservableObjectåè®®
- [ ] æ·»åŠ åŸºç¡€çš„Publishedå±æ€§
- [ ] å®ç°ç®€å•çš„Mockæ•°æ®åŠ è½½
- [ ] é›†æˆåŠ¨æ€è·¯å¾„ç»„ä»¶

### é˜¶æ®µ2ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (5å¤©)

#### Day 5-6: æ•°å­¦å­¦ä¹ åœºæ™¯
- [ ] å®ç°å­¦ç”Ÿç±»å‹åˆ†æé€»è¾‘
- [ ] å®ç°åŠ¨æ€å­¦ä¹ è·¯å¾„ç”Ÿæˆç®—æ³•
- [ ] å®ç°é¢˜ç›®åˆ†æåŠŸèƒ½
- [ ] å®ç°è¿›åº¦è·Ÿè¸ªé€»è¾‘
- [ ] å®ç°åé¦ˆæ”¶é›†å’Œåˆ†æ
- [ ] å®ç°è·¯å¾„ä¼˜åŒ–å’Œè°ƒæ•´

#### Day 7-8: å­¦ä¹ è·¯å¾„åœºæ™¯
- [ ] å®ç°å­¦ä¹ é£æ ¼åˆ†æ
- [ ] å®ç°åŠ¨æ€ä¸ªæ€§åŒ–è·¯å¾„è§„åˆ’
- [ ] å®ç°å†…å®¹æ¨èç®—æ³•
- [ ] å®ç°å­¦ä¹ æ•ˆæœè¯„ä¼°
- [ ] å®ç°è·¯å¾„æ¼”è¿›è·Ÿè¸ª
- [ ] å®ç°ä¼˜åŒ–å»ºè®®ç”Ÿæˆ

#### Day 9: AIè¾…å¯¼åœºæ™¯
- [ ] å®ç°ä¸åŒè¾…å¯¼æ¨¡å¼
- [ ] å®ç°å¯¹è¯å†å²ç®¡ç†
- [ ] å®ç°AIå“åº”ç”Ÿæˆ
- [ ] å®ç°å­¦ä¹ æ´å¯Ÿåˆ†æ
- [ ] å®ç°å®æ—¶äº¤äº’ä¼˜åŒ–
- [ ] å®ç°æƒ…æ„ŸçŠ¶æ€è¯†åˆ«

### é˜¶æ®µ3: é›†æˆæµ‹è¯• (2å¤©)

#### Day 10: åŠŸèƒ½é›†æˆæµ‹è¯•
- [ ] æµ‹è¯•ä¸‰ä¸ªåœºæ™¯çš„é›†æˆ
- [ ] éªŒè¯æ•°æ®æµè½¬æ­£ç¡®æ€§
- [ ] æµ‹è¯•é”™è¯¯å¤„ç†æœºåˆ¶
- [ ] æµ‹è¯•åŠ¨æ€è·¯å¾„è°ƒæ•´åŠŸèƒ½
- [ ] æµ‹è¯•åé¦ˆåˆ†æå‡†ç¡®æ€§

#### Day 11: æ€§èƒ½ä¼˜åŒ–
- [ ] ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
- [ ] æµ‹è¯•å¹¶å‘å¤„ç†èƒ½åŠ›
- [ ] ä¼˜åŒ–å†…å­˜ä½¿ç”¨
- [ ] æµ‹è¯•å“åº”æ—¶é—´
- [ ] éªŒè¯æ‰©å±•æ€§

### é˜¶æ®µ4: UIå±•ç¤ºå±‚ (3å¤©)

#### Day 12: UIç»„ä»¶å¼€å‘
- [ ] åˆ›å»ºæ•°å­¦å­¦ä¹ ç•Œé¢ï¼ˆåŒ…å«è·¯å¾„å¯è§†åŒ–ï¼‰
- [ ] åˆ›å»ºå­¦ä¹ è·¯å¾„ç•Œé¢ï¼ˆåŒ…å«æ¼”è¿›å†å²ï¼‰
- [ ] åˆ›å»ºAIè¾…å¯¼ç•Œé¢ï¼ˆåŒ…å«å®æ—¶ä¼˜åŒ–ï¼‰
- [ ] å®ç°å“åº”å¼å¸ƒå±€
- [ ] åˆ›å»ºè·¯å¾„å˜åŒ–åŠ¨ç”»

#### Day 13: åŠ¨æ€å¯è§†åŒ–
- [ ] å®ç°è·¯å¾„å˜åŒ–å¯è§†åŒ–
- [ ] å®ç°åé¦ˆæŒ‡æ ‡å±•ç¤º
- [ ] å®ç°ä¼˜åŒ–å»ºè®®å±•ç¤º
- [ ] å®ç°å­¦ä¹ æ•ˆæœå¯¹æ¯”
- [ ] å®ç°å®æ—¶çŠ¶æ€æ›´æ–°

#### Day 14: é›†æˆå’Œä¼˜åŒ–
- [ ] é›†æˆViewModelå’ŒUI
- [ ] å®ç°æ•°æ®ç»‘å®š
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
- [ ] ä¼˜åŒ–ç”¨æˆ·äº¤äº’ä½“éªŒ
- [ ] å®Œå–„åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ

## ğŸ¯ é¢„æœŸæ•ˆæœ

### æŠ€æœ¯éªŒè¯
- **æ¶æ„çµæ´»æ€§**ï¼šéªŒè¯æ’ä»¶åŒ–æ¶æ„èƒ½æ”¯æŒå¤æ‚ä¸šåŠ¡åœºæ™¯
- **æ‰©å±•æ€§**ï¼šéªŒè¯æ–°å¢å­¦ç”Ÿç±»å‹å’Œå­¦ä¹ è·¯å¾„çš„ä¾¿åˆ©æ€§
- **å¯ç»´æŠ¤æ€§**ï¼šéªŒè¯ä»£ç ç»“æ„çš„æ¸…æ™°æ€§å’Œå¯ç»´æŠ¤æ€§
- **åŠ¨æ€é€‚åº”èƒ½åŠ›**ï¼šéªŒè¯ç³»ç»Ÿèƒ½æ ¹æ®åé¦ˆå®æ—¶è°ƒæ•´ âœ¨
- **æ™ºèƒ½ä¼˜åŒ–èƒ½åŠ›**ï¼šéªŒè¯AIé©±åŠ¨çš„è·¯å¾„ä¼˜åŒ–æ•ˆæœ âœ¨

### ä¸šåŠ¡éªŒè¯
- **ä¸ªæ€§åŒ–èƒ½åŠ›**ï¼šéªŒè¯ç³»ç»Ÿèƒ½æ ¹æ®å­¦ç”Ÿç‰¹ç‚¹æä¾›ä¸ªæ€§åŒ–æœåŠ¡
- **å­¦ä¹ æ•ˆæœ**ï¼šéªŒè¯ä¸åŒå­¦ä¹ è·¯å¾„çš„å­¦ä¹ æ•ˆæœå·®å¼‚
- **ç”¨æˆ·ä½“éªŒ**ï¼šéªŒè¯AIè¾…å¯¼çš„è‡ªç„¶æ€§å’Œæœ‰æ•ˆæ€§
- **åŠ¨æ€è°ƒæ•´æ•ˆæœ**ï¼šéªŒè¯åé¦ˆé©±åŠ¨çš„è·¯å¾„è°ƒæ•´æ•ˆæœ âœ¨
- **å¯è§†åŒ–æ•ˆæœ**ï¼šéªŒè¯è·¯å¾„å˜åŒ–çš„ç›´è§‚å±•ç¤ºæ•ˆæœ âœ¨

### æ€§èƒ½æŒ‡æ ‡
- **å“åº”æ—¶é—´**ï¼šViewModelæ•°æ®æ›´æ–° < 100ms
- **è·¯å¾„è°ƒæ•´æ—¶é—´**ï¼šåŠ¨æ€è·¯å¾„è°ƒæ•´ < 500ms âœ¨
- **å†…å­˜ä½¿ç”¨**ï¼šMockæ•°æ®åŠ è½½ < 50MB
- **å¹¶å‘å¤„ç†**ï¼šæ”¯æŒå¤šå­¦ç”ŸåŒæ—¶å­¦ä¹ 
- **é”™è¯¯æ¢å¤**ï¼šå¼‚å¸¸æƒ…å†µä¸‹çš„ä¼˜é›…é™çº§
- **ä¼˜åŒ–å‡†ç¡®æ€§**ï¼šè·¯å¾„ä¼˜åŒ–å»ºè®®å‡†ç¡®ç‡ > 85% âœ¨

## ğŸš€ ä¸‹ä¸€æ­¥å®æ–½æ¸…å•

### ç«‹å³å¼€å§‹
1. **åˆ›å»ºæ•°æ®æ¨¡å‹æ–‡ä»¶**
   - `DouBaoStudentProfile.swift`ï¼ˆå¢åŠ åŠ¨æ€å±æ€§ï¼‰
   - `DouBaoLearningRecord.swift`ï¼ˆå¢åŠ åé¦ˆè®°å½•ï¼‰
   - `DouBaoCapabilityPipeline.swift`ï¼ˆå¢åŠ ä¼˜åŒ–èƒ½åŠ›ï¼‰
   - `DouBaoPathOptimizer.swift`ï¼ˆè·¯å¾„ä¼˜åŒ–å¼•æ“ï¼‰
   - `DouBaoFeedbackAnalyzer.swift`ï¼ˆåé¦ˆåˆ†æå™¨ï¼‰
   - `DouBaoPathVisualizer.swift`ï¼ˆè·¯å¾„å¯è§†åŒ–å™¨ï¼‰

2. **åˆ›å»ºMockæ•°æ®æä¾›è€…**
   - `DouBaoMockDataProvider.swift`
   - åŒ…å«ä¸‰ä¸ªåœºæ™¯çš„å®Œæ•´Mockæ•°æ®ï¼ˆåŒ…å«åŠ¨æ€ç‰¹æ€§ï¼‰
   - åé¦ˆæ•°æ®ç”Ÿæˆå™¨

3. **åˆ›å»ºåŸºç¡€ViewModel**
   - `DouBaoMathViewModel.swift`ï¼ˆåŒ…å«åŠ¨æ€è·¯å¾„ï¼‰
   - `DouBaoLearningPathViewModel.swift`ï¼ˆåŒ…å«è·¯å¾„æ¼”è¿›ï¼‰
   - `DouBaoTutoringViewModel.swift`ï¼ˆåŒ…å«å®æ—¶ä¼˜åŒ–ï¼‰

4. **åˆ›å»ºUIå±•ç¤ºé¡µé¢**
   - `DouBaoMathDemoViewController.swift`
   - `DouBaoLearningPathDemoViewController.swift`
   - `DouBaoTutoringDemoViewController.swift`

### ç­‰å¾…æŒ‡ä»¤
- ç¡®è®¤å®æ–½è®¡åˆ’åå¼€å§‹å…·ä½“ç¼–ç 
- æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´Mockæ•°æ®ç»“æ„
- æ ¹æ®UIè®¾è®¡è°ƒæ•´ViewModelæ¥å£
- æ ¹æ®æµ‹è¯•ç»“æœä¼˜åŒ–åŠ¨æ€è°ƒæ•´ç®—æ³•

---

## ğŸ“ åŠ¨æ€è·¯å¾„è®¾è®¡äº®ç‚¹ âœ¨

### 1. å®æ—¶åé¦ˆé©±åŠ¨
- ç”¨æˆ·è¡Œä¸ºå®æ—¶ç›‘æ§
- å­¦ä¹ æ•ˆæœå³æ—¶è¯„ä¼°
- æƒ…æ„ŸçŠ¶æ€æ™ºèƒ½è¯†åˆ«
- åé¦ˆæ•°æ®å¿«é€Ÿåˆ†æ

### 2. æ™ºèƒ½è·¯å¾„ä¼˜åŒ–
- AIé©±åŠ¨çš„ä¼˜åŒ–ç®—æ³•
- å¤šç»´åº¦æ•ˆæœè¯„ä¼°
- é¢„æµ‹æ€§è·¯å¾„è°ƒæ•´
- ä¸ªæ€§åŒ–ä¼˜åŒ–ç­–ç•¥

### 3. å¯è§†åŒ–è·¯å¾„å˜åŒ–
- è·¯å¾„æ¼”è¿›å†å²å±•ç¤º
- å®æ—¶å˜åŒ–åŠ¨ç”»æ•ˆæœ
- ä¼˜åŒ–å»ºè®®å¯è§†åŒ–
- å­¦ä¹ æ•ˆæœå¯¹æ¯”å±•ç¤º

### 4. è‡ªé€‚åº”å­¦ä¹ ä½“éªŒ
- åŠ¨æ€éš¾åº¦è°ƒæ•´
- ä¸ªæ€§åŒ–å†…å®¹æ¨è
- çµæ´»çš„å­¦ä¹ èŠ‚å¥
- æ™ºèƒ½çš„æ¿€åŠ±æœºåˆ¶
